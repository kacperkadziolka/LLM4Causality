steps_instructions:
  1: |
    Read the Data
    - Identify extracted nodes and their correlations.
    - Note all independencies.
  2: |
    Initialize the Graph
    - Create edges between all correlated node pairs.
    - List connections for each node.
  3: |
    Apply Independencies
    - Remove edges based on independencies.
    - Specify which independencies led to each removal.
  4: |
    Compile the Causal Undirected Skeleton
    - List every variable (node) identified in the premise.
    - For each node, list all other nodes it is connected to based on the correlations.
    - Exclude any edge that should be removed due to a declared independency.
    - Ensure the final graph reflects both:
        - All existing correlations as edges, and
        - The absence of edges where independencies apply.
    - Format the output in a clear, consistent manner, for example:
        In this graph:
        - Node A is connected to nodes B, C.
        - Node B is connected to node A.
        - Node C is connected to node A.
        - Node D has no connections.
    Compile the Causal Undirected Skeleton
    - List each node with its connected nodes.
    - Ensure all applied independencies are reflected accurately.


steps_examples:
  1: |
    Example for Step 1 – Read the Data:
    - Extracted variables: A, B, C, D
    - Correlations: (A, B), (A, C), (A, D), (B, C), (B, D), (C, D)
    - Independencies:
      - (B, D) are independent given A
      - (B, D) are independent given A, C
      - (C, D) are independent given A
      - (C, D) are independent given A, B
  2: |
    Example for Step 2 – Initialize the Graph:
    - Created edges between all correlated variable pairs.
    - Initial edges: {(A, B), (A, C), (A, D), (B, C), (B, D), (C, D)}
  3: |
    Example for Step 3 – Apply Independencies:
    - Because B and D are independent given A, there is no edge between B and D.
    - Because C and D are independent given A, there is no edge between C and D.
  4: |
    Example for Step 4 – Compile the Causal Undirected Skeleton:
    In this graph:
      - Node A is connected to nodes B, D, C.
      - Node B is connected to nodes C.
      - Node C has no connections.
      - Node D has no connections.


steps_headers:
  1: Step 1 - Read the Data
  2: Step 2 - Initialize the Graph
  3: Step 3 - Apply Independencies
  4: Step 4 - Compile the Causal Undirected Skeleton


generate_prompt_template: |
  Current state:
  {current_state}
  
  Next step instruction (focus exclusively on this step):
  {next_step_instruction}
  
  Step example (for guidance, only for this step):
  {next_step_example}
  
  IMPORTANT:
  - Your response MUST ONLY address the above step.
  - DO NOT generate any content or steps beyond what is requested for this step.


evaluate_prompt_template: |
  Given the following chain-of-thought:
  {previous_state}
  
  And the following candidate step:
  {recent_step}
  
  Please evaluate the candidate step with respect to these constraints:
  {instruction_constraints}
  
  Consider the following criteria:
  - Does the candidate step correctly implement the change(s) specified?
  - Are all nodes and edges (or removals) consistent with the overall constraints?
  - Is the candidate step detailed enough to reflect the intended modifications?
  
  Rate on a scale from 0 (poor) to 10 (excellent) how well the candidate step satisfies the constraints.
  
  IMPORTANT:
  - Your response MUST be exactly one integer number between 0 and 10.
  - Do NOT include any extra text, explanation, or additional characters.
  
  For example, if you believe the state is excellent, simply respond with:
  10


step_template: |
  {step_number}:
  {candidate_step}


system_prompt: |
  You are an expert in causal inference and data analysis, proficient in applying the PC (Peter-Clark) algorithm.
  Your overall task is to extract the causal undirected skeleton from a given premise by following a multi-step process.
  
  When generating candidate thought steps, focus ONLY on the current step as indicated by the instructions and examples provided.
  Do not include information or steps beyond the one requested.


initial_prompt: |
  Task Description: Given the provided premise, apply the PC (Peter-Clark) algorithm only by following instructions given below. Do not provide any additional information or assumptions.
  {premise}
